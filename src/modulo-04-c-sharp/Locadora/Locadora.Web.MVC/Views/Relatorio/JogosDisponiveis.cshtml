@model RelatorioModel
@{
    ViewBag.Title = "Relatorio de Jogos";
}

<h2 class="view-title text-center">Relatorio de Jogos</h2>

<h3 class="text-center">@TempData["Mensagem"]</h3>

@{ int numeroDeColunasDaAcao = User.IsInRole("ADMIN") ? 3 : 2; }

@if (User.IsInRole("ADMIN"))
{
    <nav class="navbar-btn">
        <ul class="nav">
            <li><button class="btn btn-default btn-primary" onclick="location.href='../Jogo/Manter'">Cadastrar jogo</button></li>
        </ul>
    </nav>
}

@if (Model != null)
{
    <table class="table table-striped table-bordered table-background">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Categoria</th>
                <th>Selo</th>
                <th colspan="3">Ações</th>
            </tr>
        <thead>
        <tfoot>
            <tr>
                <td>Quantidade de jogos: @Model.QuantidadeTotal</td>
            </tr>
        </tfoot>
        <tbody>
            @foreach (var jogo in @Model.ListaJogos)
            {
                <tr>
                    <td>@jogo.Nome</td>
                    <td>@jogo.Categoria</td>
                    <td align="center">@Html.Partial("~/Views/Shared/Jogo/_SeloJogo.cshtml", jogo.Selo)</td>
                    <td align="center">@Html.ActionLink("Detalhes", "JogoDetalhes", "Jogo", new { id = jogo.Id }, new { })</td>
                    @if (User.IsInRole("ADMIN"))
                    {
                        <td align="center">@Html.ActionLink("Editar", "Manter", "Jogo", new { id = jogo.Id }, new { })</td>
                    }
                    <td align="center">@Html.ActionLink("Locar", "Locar", "Locacao", new { id = jogo.Id }, new { })</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-center">@ViewBag.Mensagem</p>
}
